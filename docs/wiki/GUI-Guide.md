# GUI使用ガイド

このページでは、Kuma-ReportのGUI（グラフィカルユーザーインターフェース）について詳しく説明します。

## 目次

1. [概要](#概要)
2. [Java版のGUI](#java版のgui)
3. [Bedrock版のForm](#bedrock版のform)
4. [プレイヤー向けGUI](#プレイヤー向けgui)
5. [管理者向けGUI](#管理者向けgui)
6. [カスタマイズ](#カスタマイズ)

---

## 概要

Kuma-Reportは、Java版とBedrock版（統合版）の両方に対応した直感的なGUIを提供します。

### 特徴

- **自動判定** - プレイヤーのプラットフォームを自動的に判定
- **直感的** - クリック操作で簡単に通報
- **カスタマイズ可能** - アイテムアイコンや説明をカスタマイズ可能
- **ページネーション** - 大量のデータも快適に閲覧

### プラットフォーム別のUI

| プラットフォーム | UI種類 | 備考 |
|----------------|--------|------|
| Java版 | チェストGUI | クリックで選択 |
| Bedrock版 | カスタムForm | タッチ操作に最適化 |

---

## Java版のGUI

### プレイヤー選択GUI

**開き方:**
```
/report
```

**表示内容:**
- オンラインプレイヤーのプレイヤーヘッド
- プレイヤー名
- ページ移動ボタン

**操作方法:**
1. 通報したいプレイヤーのヘッドをクリック
2. 次のページ（右矢印）・前のページ（左矢印）で移動

**レイアウト:**
```
[P] [P] [P] [P] [P] [P] [P] [P] [P]
[P] [P] [P] [P] [P] [P] [P] [P] [P]
[P] [P] [P] [P] [P] [P] [P] [P] [P]
[P] [P] [P] [P] [P] [P] [P] [P] [P]
[P] [P] [P] [P] [P] [P] [P] [P] [P]
[<] [ ] [ ] [ ] [ ] [ ] [ ] [ ] [>]

[P] = プレイヤーヘッド
[<] = 前のページ
[>] = 次のページ
```

**アイテム情報:**
- **アイテム:** プレイヤーヘッド
- **表示名:** プレイヤー名
- **説明:** クリックして通報

---

### カテゴリ選択GUI

**開き方:**
プレイヤー選択GUI でプレイヤーをクリック後、自動的に開く

**表示内容:**
- 通報理由のカテゴリ
- 各カテゴリの説明

**カテゴリ例:**
1. **チート使用** - バリアブロックアイコン
2. **迷惑行為** - TNTアイコン
3. **不適切発言** - 本と羽ペンアイコン
4. **荒らし行為** - ダイヤのツルハシアイコン
5. **その他** - 紙アイコン

**操作方法:**
1. 該当するカテゴリをクリック
2. 「その他」を選択した場合は、チャットで理由を入力

**レイアウト:**
```
[ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ]
[ ] [チ] [ ] [迷] [ ] [不] [ ] [荒] [ ]
[ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ]
[ ] [ ] [ ] [他] [ ] [ ] [ ] [ ] [ ]
[ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ]

[チ] = チート使用
[迷] = 迷惑行為
[不] = 不適切発言
[荒] = 荒らし行為
[他] = その他
```

**アイテム情報:**
- **アイテム:** 設定されたMaterial
- **表示名:** カテゴリ名
- **説明:** カテゴリの詳細説明

---

### 通報一覧GUI（管理者用）

**開き方:**
```
/reportadmin
```

**表示内容:**
- 通報のリスト
- 通報ID、通報者、被通報者、ステータス
- ページ移動ボタン

**操作方法:**
1. 通報をクリックして詳細を表示
2. 次のページ・前のページで移動

**ステータス別の色分け:**
| ステータス | アイテム色 |
|-----------|----------|
| 未処理 | 黄色（GOLD） |
| 処理中 | 青（AQUA） |
| 承認済み | 緑（GREEN） |
| 却下済み | 赤（RED） |

**レイアウト:**
```
[R] [R] [R] [R] [R] [R] [R] [R] [R]
[R] [R] [R] [R] [R] [R] [R] [R] [R]
[R] [R] [R] [R] [R] [R] [R] [R] [R]
[R] [R] [R] [R] [R] [R] [R] [R] [R]
[R] [R] [R] [R] [R] [R] [R] [R] [R]
[<] [ ] [統] [ ] [ ] [ ] [ ] [ ] [>]

[R] = 通報アイテム
[<] = 前のページ
[>] = 次のページ
[統] = 統計情報
```

---

### 通報詳細GUI（管理者用）

**開き方:**
通報一覧GUIで通報をクリック、または `/reportadmin view <ID>`

**表示内容:**
- 通報者情報
- 被通報者情報
- 通報理由
- ステータス
- 処理ボタン

**操作方法:**
1. 承認ボタン（緑色）をクリックして承認
2. 却下ボタン（赤色）をクリックして却下
3. 戻るボタンで一覧に戻る

**レイアウト:**
```
[ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ]
[ ] [通] [ ] [被] [ ] [ ] [ ] [ ] [ ]
[ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ]
[ ] [ ] [理] [ ] [ ] [ ] [ ] [ ] [ ]
[ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ] [ ]
[戻] [ ] [承] [ ] [却] [ ] [ ] [ ] [ ]

[通] = 通報者情報
[被] = 被通報者情報
[理] = 通報理由
[承] = 承認ボタン
[却] = 却下ボタン
[戻] = 戻るボタン
```

**ボタンの詳細:**

| ボタン | アイテム | 機能 |
|--------|---------|------|
| 承認 | 緑色の羊毛 | 通報を承認 |
| 却下 | 赤色の羊毛 | 通報を却下 |
| 戻る | 矢印 | 一覧に戻る |

---

## Bedrock版のForm

Bedrock版プレイヤーには、カスタムFormが表示されます。

### プレイヤー選択Form

**開き方:**
```
/report
```

**表示内容:**
- オンラインプレイヤーのリスト
- ボタン形式で選択

**操作方法:**
1. 通報したいプレイヤーのボタンをタップ
2. 次の画面（カテゴリ選択）に進む

**Form種類:** SimpleForm

---

### カテゴリ選択Form

**表示内容:**
- 通報理由のカテゴリリスト
- 各カテゴリの説明

**操作方法:**
1. 該当するカテゴリをタップ
2. 「その他」を選択した場合は、入力フォームが表示される

**Form種類:** SimpleForm / CustomForm（「その他」選択時）

---

### 理由入力Form

**表示内容:**
- テキスト入力フィールド
- 送信ボタン

**操作方法:**
1. 理由を入力
2. 送信ボタンをタップ

**Form種類:** CustomForm

---

### 管理者向けForm

**表示内容:**
- 通報一覧
- 統計情報
- 設定

**操作方法:**
1. 通報を選択して詳細を表示
2. 承認・却下ボタンをタップ

**Form種類:** SimpleForm / ModalForm

---

## プレイヤー向けGUI

### 通報の流れ（Java版）

1. **コマンド実行**
   ```
   /report
   ```

2. **プレイヤー選択**
   - オンラインプレイヤーのヘッドをクリック

3. **カテゴリ選択**
   - 通報理由のカテゴリをクリック

4. **「その他」の場合**
   - チャットで理由を入力（30秒以内）
   - 5文字以上500文字以内

5. **詳細入力（オプション）**
   - チャットで詳細を入力
   - 「skip」または「なし」で省略可能

6. **完了**
   - 成功メッセージが表示される

---

### 通報の流れ（Bedrock版）

1. **コマンド実行**
   ```
   /report
   ```

2. **プレイヤー選択Form**
   - プレイヤーをタップ

3. **カテゴリ選択Form**
   - カテゴリをタップ

4. **「その他」の場合**
   - 入力フォームに理由を入力
   - 送信ボタンをタップ

5. **完了**
   - 成功メッセージが表示される

---

### バグレポートの流れ

**Java版・Bedrock版共通:**

1. **コマンド実行**
   ```
   /bugreport
   ```

2. **説明入力**
   - チャットまたはFormで説明を入力
   - 10文字以上1000文字以内

3. **完了**
   - 成功メッセージが表示される
   - 座標情報が自動記録される

---

## 管理者向けGUI

### 通報管理の流れ

1. **管理GUIを開く**
   ```
   /reportadmin
   ```

2. **通報一覧を確認**
   - 未処理の通報が黄色で表示される
   - クリックして詳細を表示

3. **通報詳細を確認**
   - 通報者、被通報者、理由を確認
   - 承認または却下を選択

4. **承認/却下**
   - 承認ボタン（緑）をクリック → メモを入力（オプション）
   - 却下ボタン（赤）をクリック → メモを入力（オプション）

5. **完了**
   - 通報のステータスが更新される
   - 通報者に通知が送信される

---

### 統計情報の確認

**GUIから:**
1. 通報一覧GUIを開く
2. 統計情報ボタン（書見台）をクリック

**コマンドから:**
```
/reportadmin stats
```

**表示内容:**
- 総通報数
- 未処理の通報数
- 承認済みの通報数
- 却下済みの通報数

---

## カスタマイズ

### GUIタイトルのカスタマイズ

`config.yml`:
```yaml
gui:
  title:
    player-select: "&#60A5FA通報するプレイヤーを選択"
    category-select: "&#60A5FA通報理由を選択"
    report-list: "&#60A5FA通報一覧"
    report-detail: "&#60A5FA通報詳細 - ID: {id}"
```

**プレースホルダー:**
- `{id}` - 通報ID

---

### カテゴリアイコンのカスタマイズ

`config.yml`:
```yaml
report-categories:
  - name: "カスタムカテゴリ"
    material: DIAMOND  # アイテムアイコンを変更
    description:
      - "&#94A3B8説明1"
      - "&#94A3B8説明2"
```

**利用可能なMaterial:**
[Spigot Javadoc - Material](https://hub.spigotmc.org/javadocs/spigot/org/bukkit/Material.html)

---

### 1ページあたりの表示数

`config.yml`:
```yaml
gui:
  items-per-page: 45  # 27, 36, 45のいずれか
```

**推奨値:**
- `27` - 3行（小）
- `36` - 4行（中）
- `45` - 5行（大・推奨）

---

## GUI使用時の注意事項

### Java版

1. **インベントリが満杯の場合**
   - GUIが開かないことがあります
   - インベントリを整理してから実行してください

2. **他のプラグインとの競合**
   - 他のGUIプラグインと競合する場合があります
   - プラグインの優先順位を調整してください

3. **クリックの反応**
   - 連続でクリックすると誤動作する可能性があります
   - 1回クリックして反応を待ってください

---

### Bedrock版

1. **Formの表示遅延**
   - ネットワーク状況により、Formの表示に時間がかかる場合があります
   - 少し待ってから再度実行してください

2. **Floodgateの必要性**
   - Bedrock版プレイヤーにFormを表示するには、Floodgateが必要です
   - Geyserのみでは動作しません

3. **入力文字数制限**
   - Formの入力フィールドには文字数制限があります
   - 長すぎる場合は分割して入力してください

---

## トラブルシューティング

### GUIが開かない

**Java版:**
1. インベントリを整理
2. 権限を確認（`kumareport.use`）
3. サーバーログを確認

**Bedrock版:**
1. Floodgateがインストールされているか確認
2. Geyserが正常に動作しているか確認
3. サーバーログを確認

---

### アイテムが表示されない

**原因:**
- Material名が間違っている
- Minecraftバージョンに存在しないアイテム

**解決策:**
1. `config.yml` のMaterial名を確認
2. 有効なMaterial名に変更
3. `/reportadmin reload` でリロード

---

### ページ移動ボタンが機能しない

**原因:**
- データが1ページに収まっている
- GUIの設定ミス

**解決策:**
1. 通報データが複数ページ分あるか確認
2. `config.yml` の `items-per-page` を確認

---

## ベストプラクティス

### プレイヤー向け

1. **カテゴリを正しく選択**
   - 該当するカテゴリを選択してください
   - 「その他」は最後の手段として使用

2. **詳細な理由を入力**
   - 具体的な理由を入力してください
   - 「チート」だけでなく「X-Rayを使用している」など

3. **誤通報に注意**
   - 確実な証拠がある場合のみ通報してください
   - 誤通報が多いとアカウントが制限される可能性があります

---

### 管理者向け

1. **定期的な確認**
   - 未処理の通報を定期的に確認してください
   - Discord通知を活用すると便利です

2. **証拠の確認**
   - 通報を処理する前に、証拠を確認してください
   - ログやスクリーンショットを確認

3. **メモの活用**
   - 承認・却下時にメモを入力してください
   - 後で確認する際に役立ちます

---

前のページ: [Discord連携](Discord-Integration.md) | 次のページ: [FAQ](FAQ.md)
